<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-01-02">

<title>cSVD burden project - SVD score tool</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">cSVD burden project</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../doc/assessor-intro.html" rel="" target="">
 <span class="menu-text">Assessors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../doc/down-to-work.html" rel="" target="">
 <span class="menu-text">Scoring</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="../doc/svd-score.html" rel="" target="">
 <span class="dropdown-text">SVD scoring scale</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../doc/instrument.html" rel="" target="">
 <span class="dropdown-text">REDCap data capture</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#purpose" id="toc-purpose" class="nav-link active" data-scroll-target="#purpose">Purpose</a></li>
  <li><a href="#scoring" id="toc-scoring" class="nav-link" data-scroll-target="#scoring">Scoring</a></li>
  <li><a href="#setting" id="toc-setting" class="nav-link" data-scroll-target="#setting">Setting</a></li>
  <li><a href="#definitions-on-biomarkers" id="toc-definitions-on-biomarkers" class="nav-link" data-scroll-target="#definitions-on-biomarkers">Definitions on biomarkers</a>
  <ul class="collapse">
  <li><a href="#microbleeds" id="toc-microbleeds" class="nav-link" data-scroll-target="#microbleeds">Microbleeds</a></li>
  <li><a href="#superficial-siderosis" id="toc-superficial-siderosis" class="nav-link" data-scroll-target="#superficial-siderosis">Superficial siderosis</a></li>
  <li><a href="#lacunar-infarcts" id="toc-lacunar-infarcts" class="nav-link" data-scroll-target="#lacunar-infarcts">Lacunar infarcts</a></li>
  <li><a href="#white-matter-hyperintensities" id="toc-white-matter-hyperintensities" class="nav-link" data-scroll-target="#white-matter-hyperintensities">White matter hyperintensities</a></li>
  <li><a href="#atrophy" id="toc-atrophy" class="nav-link" data-scroll-target="#atrophy">Atrophy</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="svd-score.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">SVD score tool</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 2, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="purpose" class="level2">
<h2 class="anchored" data-anchor-id="purpose">Purpose</h2>
<p><strong>Primary:</strong> continuous scale for grading SVD burden, for possible use in current as well as historical data.</p>
<p><strong>Secondary:</strong> risk stratification of new stroke, dementia; correlation to life style factors.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Only intended for research use currently
</div>
</div>
<div class="callout-body-container callout-body">
<p>The following scoring system is not formally published and has not been through peer-review.</p>
</div>
</div>
</section>
<section id="scoring" class="level2">
<h2 class="anchored" data-anchor-id="scoring">Scoring</h2>
<table class="table-striped table-hover table">
<caption>SVD score table</caption>
<colgroup>
<col style="width: 70%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th><strong>MRI features</strong></th>
<th><strong>Raw SVD score value</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Number of microbleeds (<em>T2*/SWI</em>)</strong></td>
<td></td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2-4</td>
<td>2</td>
</tr>
<tr class="odd">
<td>5-10</td>
<td>3</td>
</tr>
<tr class="even">
<td>&gt;10</td>
<td>4</td>
</tr>
<tr class="odd">
<td><strong>Location of microbleeds – no points (<em>T2*/SWI</em>)</strong></td>
<td></td>
</tr>
<tr class="even">
<td>Lobar, deep, or infratentorial (choose one or more)</td>
<td>L/D/I</td>
</tr>
<tr class="odd">
<td><strong>Superficiel siderose (<em>T2*/SWI</em>)</strong></td>
<td></td>
</tr>
<tr class="even">
<td>No siderosis</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1 sulcus</td>
<td>1</td>
</tr>
<tr class="even">
<td>&gt;1 sulcus</td>
<td>2</td>
</tr>
<tr class="odd">
<td><strong>Lacunes (<em>FLAIR</em>)</strong></td>
<td></td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1-2</td>
<td>1</td>
</tr>
<tr class="even">
<td>3-5</td>
<td>2</td>
</tr>
<tr class="odd">
<td>&gt;5</td>
<td>3</td>
</tr>
<tr class="even">
<td><strong>White matter hyperintensities – see Figure 1 (<em>FLAIR</em>)</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>Absent</td>
<td>0</td>
</tr>
<tr class="even">
<td>Punctate foci</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Beginning confluence</td>
<td>2</td>
</tr>
<tr class="even">
<td>Large confluent areas</td>
<td>3</td>
</tr>
<tr class="odd">
<td><strong>Atrophy - see Figure 2 (<em>FLAIR/T1</em>)</strong></td>
<td></td>
</tr>
<tr class="even">
<td>No</td>
<td>0</td>
</tr>
<tr class="odd">
<td>Mild</td>
<td>1</td>
</tr>
<tr class="even">
<td>Moderate</td>
<td>2</td>
</tr>
<tr class="odd">
<td>Severe</td>
<td>3</td>
</tr>
<tr class="even">
<td><strong>Total SVD score</strong></td>
<td><strong>0-15</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="setting" class="level2">
<h2 class="anchored" data-anchor-id="setting">Setting</h2>
<p>The scoring system is intended for use with acute MRI stroke scans. Scans are performed according to the acute stroke protocol at the given time of scan. Available sequences are DWI, ADC, 2D FLAIR, and T2* or SWI in our setting, but if available 3D FLAIR and T1 sequences should be used. Data capturing should reflect this, if data is later merged from different populations.</p>
<p>Scoring is performed independently by trained neurologists. Inter-rate-reliability-measures are performed to ensure validity.</p>
</section>
<section id="definitions-on-biomarkers" class="level2">
<h2 class="anchored" data-anchor-id="definitions-on-biomarkers">Definitions on biomarkers</h2>
<p>Definitions are mainly according to the STRIVE v1 criteria,<span class="citation" data-cites="wardlaw2013">(<a href="#ref-wardlaw2013" role="doc-biblioref">Wardlaw et al. 2013</a>)</span> with minor local specifications.</p>
<section id="microbleeds" class="level3">
<h3 class="anchored" data-anchor-id="microbleeds">Microbleeds</h3>
<p>Sequence: T2*/SWI</p>
<p>Small (generally 2–5 mm in diameter, but sometimes up to 10 mm) areas of signal void with associated blooming seen on SWI-weighted MRI.</p>
<p>Different cut-offs are used in different trials.<span class="citation" data-cites="akoudad2016">(<a href="#ref-akoudad2016" role="doc-biblioref">Akoudad et al. 2016</a>)</span> We try to register in a way, so that our analysis can be made similarly to other studies and to provide enough resolution.</p>
<p>As discussions about the importance of location is ongoing,<span class="citation" data-cites="vernooij2008">(<a href="#ref-vernooij2008" role="doc-biblioref">Vernooij et al. 2008</a>)</span> we register if microbleeds are located lobar, deep, or infratentorial.</p>
</section>
<section id="superficial-siderosis" class="level3">
<h3 class="anchored" data-anchor-id="superficial-siderosis">Superficial siderosis</h3>
<p>Sequence: T2*/SWI</p>
<p>“Investigators should describe the location of siderosis (i.e., the number of sulci involved and in which lobes).”<span class="citation" data-cites="wardlaw2013">(<a href="#ref-wardlaw2013" role="doc-biblioref">Wardlaw et al. 2013, 828</a>)</span></p>
</section>
<section id="lacunar-infarcts" class="level3">
<h3 class="anchored" data-anchor-id="lacunar-infarcts">Lacunar infarcts</h3>
<p>Sequence: 2D/3D FLAIR</p>
<p>“A round or ovoid, subcortical, fluid-filled cavity (signal similar to CSF) of between 3 mm and about 15 mm in diameter, consistent with a previous acute small subcortical infarct or haemorrhage in the territory of one perforating arteriole.”<span class="citation" data-cites="wardlaw2013">(<a href="#ref-wardlaw2013" role="doc-biblioref">Wardlaw et al. 2013, 825</a>)</span></p>
<p>Additionally: “We identified asymptomatic lacunar infarcts as sharply demarcated hyperintense lesions &lt;20 mm on T2-weighted images with corresponding hypointense lesions with a hyperintense rim on FLAIR. In lacunar stroke patients, the lesion could not be compatible with the clinical stroke.”<span class="citation" data-cites="huijts2013">(<a href="#ref-huijts2013" role="doc-biblioref">Huijts et al. 2013</a>)</span></p>
</section>
<section id="white-matter-hyperintensities" class="level3">
<h3 class="anchored" data-anchor-id="white-matter-hyperintensities">White matter hyperintensities</h3>
<p>Sequence: 2D/3D FLAIR</p>
<p>The Fazekas subscale for deep white matter is used. The scale divides the white matter in periventricular and deep white matter, and each region is given a grade depending on the size and confluence of lesions.<span class="citation" data-cites="fazekas1987">(<a href="#ref-fazekas1987" role="doc-biblioref">Fazekas et al. 1987</a>)</span></p>
<p>No regional differences is noted.<span class="citation" data-cites="degroot2000">(<a href="#ref-degroot2000" role="doc-biblioref">Groot et al. 2000</a>)</span> Scoring is performed with <a href="https://radiopaedia.org/cases/fazekas-scale-for-white-matter-lesions?lang=us">visual reference</a> from <a href="https://radiopaedia.org/">Radiopedia.org</a>.</p>
</section>
<section id="atrophy" class="level3">
<h3 class="anchored" data-anchor-id="atrophy">Atrophy</h3>
<p>Sequence: 2D/3D FLAIR or T1</p>
<p>We follow definitions for the Global Cerebral Atrophy (GCA) score.<span class="citation" data-cites="harper2015">(<a href="#ref-harper2015" role="doc-biblioref">Harper et al. 2015</a>)</span></p>
<p>A picture sample for reference is used.<span class="citation" data-cites="harper2015">(<a href="#ref-harper2015" role="doc-biblioref">Harper et al. 2015, fig. 1</a>)</span></p>
</section>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-akoudad2016" class="csl-entry" role="listitem">
Akoudad, Saloua, Frank J. Wolters, Anand Viswanathan, Renée F. de Bruijn, Aad van der Lugt, Albert Hofman, Peter J. Koudstaal, M. Arfan Ikram, and Meike W. Vernooij. 2016. <span>“Association of Cerebral Microbleeds With Cognitive Decline and Dementia.”</span> <em>JAMA neurology</em> 73 (8): 934–43. <a href="https://doi.org/10.1001/jamaneurol.2016.1017">https://doi.org/10.1001/jamaneurol.2016.1017</a>.
</div>
<div id="ref-fazekas1987" class="csl-entry" role="listitem">
Fazekas, F, JB Chawluk, A Alavi, HI Hurtig, and RA Zimmerman. 1987. <span>“MR Signal Abnormalities at 1.5 T in Alzheimer’s Dementia and Normal Aging.”</span> <em>American Journal of Roentgenology</em> 149 (2): 351–56. <a href="https://doi.org/10.2214/ajr.149.2.351">https://doi.org/10.2214/ajr.149.2.351</a>.
</div>
<div id="ref-degroot2000" class="csl-entry" role="listitem">
Groot, J. C. de, F. E. de Leeuw, M. Oudkerk, J. van Gijn, A. Hofman, J. Jolles, and M. M. Breteler. 2000. <span>“Cerebral white matter lesions and cognitive function: the Rotterdam Scan Study.”</span> <em>Annals of Neurology</em> 47 (2): 145–51. <a href="https://doi.org/10.1002/1531-8249(200002)47:2<145::aid-ana3>3.3.co;2-g">https://doi.org/10.1002/1531-8249(200002)47:2&lt;145::aid-ana3&gt;3.3.co;2-g</a>.
</div>
<div id="ref-harper2015" class="csl-entry" role="listitem">
Harper, Lorna, Frederik Barkhof, Nick C. Fox, and Jonathan M. Schott. 2015. <span>“Using Visual Rating to Diagnose Dementia: A Critical Evaluation of MRI Atrophy Scales.”</span> <em>Journal of Neurology, Neurosurgery &amp; Psychiatry</em> 86 (11): 1225–33. <a href="https://doi.org/10.1136/jnnp-2014-310090">https://doi.org/10.1136/jnnp-2014-310090</a>.
</div>
<div id="ref-huijts2013" class="csl-entry" role="listitem">
Huijts, Marjolein, Annelien Duits, Robert J. van Oostenbrugge, Abraham A. Kroon, Peter W. de Leeuw, and Julie Staals. 2013. <span>“Accumulation of MRI Markers of Cerebral Small Vessel Disease is Associated with Decreased Cognitive Function. A Study in First-Ever Lacunar Stroke and Hypertensive Patients.”</span> <em>Frontiers in Aging Neuroscience</em> 5: 72. <a href="https://doi.org/10.3389/fnagi.2013.00072">https://doi.org/10.3389/fnagi.2013.00072</a>.
</div>
<div id="ref-vernooij2008" class="csl-entry" role="listitem">
Vernooij, M. W., A. van der Lugt, M. A. Ikram, P. A. Wielopolski, W. J. Niessen, A. Hofman, G. P. Krestin, and M. M. B. Breteler. 2008. <span>“Prevalence and Risk Factors of Cerebral Microbleeds: The Rotterdam Scan Study.”</span> <em>Neurology</em> 70 (14): 1208–14. <a href="https://doi.org/10.1212/01.wnl.0000307750.41970.d9">https://doi.org/10.1212/01.wnl.0000307750.41970.d9</a>.
</div>
<div id="ref-wardlaw2013" class="csl-entry" role="listitem">
Wardlaw, Joanna M., Eric E. Smith, Geert J. Biessels, Charlotte Cordonnier, Franz Fazekas, Richard Frayne, Richard I. Lindley, et al. 2013. <span>“Neuroimaging Standards for Research into Small Vessel Disease and Its Contribution to Ageing and Neurodegeneration.”</span> <em>The Lancet Neurology</em> 12 (8): 822–38. <a href="https://doi.org/10.1016/S1474-4422(13)70124-8">https://doi.org/10.1016/S1474-4422(13)70124-8</a>.
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../LICENSE.html">License: CC BY 4.0 </a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>